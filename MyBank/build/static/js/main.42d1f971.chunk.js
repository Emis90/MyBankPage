(this.webpackJsonpjaroopassessment=this.webpackJsonpjaroopassessment||[]).push([[0],{39:function(e,t,a){e.exports=a(59)},44:function(e,t,a){},56:function(e,t,a){},59:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(19),o=a.n(r),l=(a(44),a(2)),i=a(7),s=a(4),u=function(e){var t=e.setToggle,a=e.setUser,r=e.user,o=Object(n.useState)({}),u=Object(l.a)(o,2),m=u[0],d=u[1];return c.a.createElement("div",{className:"form"},c.a.createElement("h2",null,"Submit your new credentials"),c.a.createElement("form",{onChange:function(e){d(Object(s.a)(Object(s.a)({},m),{},Object(i.a)({},e.target.name,e.target.value)))},onSubmit:function(e){return function(e){e.preventDefault(),m.firstName=m.firstName[0].toUpperCase()+m.firstName.slice(1).toLowerCase(),m.lastName=m.lastName[0].toUpperCase()+m.lastName.slice(1).toLowerCase(),m.created=new Date,fetch("/api/account/".concat(r.id),{method:"put",body:JSON.stringify(m)}).then((function(e){return e.json()})).then((function(e){a(e),t("info")})).catch((function(e){return console.log(e)}))}(e)}},c.a.createElement("div",{className:"fields"},c.a.createElement("input",{type:"text",name:"firstName",placeholder:"First name",required:!0})),c.a.createElement("div",{className:"fields"},c.a.createElement("input",{type:"text",name:"lastName",placeholder:"Last name",required:!0})),c.a.createElement("div",{className:"fields"},c.a.createElement("input",{type:"tel",name:"phone",placeholder:"phone",pattern:"[0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9]",required:!0})),c.a.createElement("div",{className:"fields"},c.a.createElement("input",{type:"email",name:"email",placeholder:"email",required:!0})),c.a.createElement("div",{className:"fields"},c.a.createElement("input",{type:"submit",value:"Submit",id:"submit"}))))},m=function(e){var t=e.user,a=e.setUser,r=Object(n.useState)("info"),o=Object(l.a)(r,2),i=o[0],s=o[1];return"info"===i?c.a.createElement("div",{className:"profile"},t&&t?c.a.createElement("div",null,c.a.createElement("p",{style:{fontSize:30,margin:0,paddingTop:"2em"}},t.firstName," ",t.lastName),c.a.createElement("p",null,t.email),c.a.createElement("p",null,t.phone),c.a.createElement("button",{id:"changeButton",onClick:function(){return s("change")}},"Change credentials")):null):c.a.createElement(u,{setToggle:s,setUser:a,user:t})},d=function(e){var t=e.transaction;return t.date=t.created.split("T")[0],t.time=t.created.split("T")[1].split(".")[0],c.a.createElement("div",{className:"card"},c.a.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between"}},c.a.createElement("p",{style:{fontSize:10}},t.date,"      ",t.time),c.a.createElement("p",{style:{fontSize:10}},t.type)),c.a.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between"}},c.a.createElement("h3",{style:{margin:0}},"$",t.amount),c.a.createElement("h3",{style:{margin:0}},t.description)))},f=a(28),p=a.n(f),h=function(e){var t=e.transactions,a=e.setToggle,r=e.balance,o=e.setBalance,u=Object(n.useState)({type:"Credit"}),m=Object(l.a)(u,2),d=m[0],f=m[1];return c.a.createElement("div",{className:"form"},c.a.createElement("div",{style:{display:"flex",flexDirection:"column"}},c.a.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"flex-end"}},c.a.createElement("button",{onClick:function(){a(!1)},id:"cancelButton"},"X")),c.a.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"flex-start"}},c.a.createElement("h2",null,"Add another transaction"))),c.a.createElement("form",{onChange:function(e){"Debit"===[e.target.name]?f(Object(s.a)(Object(s.a)({},d),{},{type:"Debit"})):f(Object(s.a)(Object(s.a)({},d),{},Object(i.a)({},e.target.name,e.target.value)))},onSubmit:function(e){return function(e){e.preventDefault(),console.log(d),Number(d.amount)>Number(r)?(alert("Cannot submit payment of ".concat(d.amount,", insufficient funds")),e.preventDefault()):(d.id=t[t.length-1].id-1,d.created=new Date,d.description=d.description.split(" ").map((function(e){return e[0].toUpperCase()+e.slice(1).toLowerCase()})).join(" "),fetch("/api/account/100/transactions",{method:"post",body:JSON.stringify(d)}).then((function(e){return e.json()})).then((function(e){var t=r-e[e.length-1].amount;o(t.toFixed(2)),a(!1)})).catch((function(e){return e})))}(e)}},c.a.createElement("div",{className:"fields"},c.a.createElement("input",{type:"number",name:"amount",placeholder:"amount",min:"0.01",max:"1000000",required:!0,step:".01"})),c.a.createElement("div",{className:"fields"},c.a.createElement("input",{type:"text",name:"description",placeholder:"description",required:!0})),c.a.createElement("div",{className:"fields"},c.a.createElement("select",{name:"type",defaultValue:"Credit"},c.a.createElement("option",{type:"text",value:"Credit",label:"credit"}),c.a.createElement("option",{type:"text",value:"Debit",label:"debit"}))),c.a.createElement("div",{className:"fields"},c.a.createElement("input",{type:"submit",value:"Submit"}))))},b=function(e){var t=e.balance,a=e.setBalance,r=Object(n.useState)([]),o=Object(l.a)(r,2),i=o[0],s=o[1],u=Object(n.useState)(!1),m=Object(l.a)(u,2),f=m[0],b=m[1];Object(n.useEffect)((function(){fetch("/api/account/100/transactions",{method:"get"}).then((function(e){return e.json()})).then((function(e){s(e)})).catch((function(e){return e}))}),[t]);return c.a.createElement("div",{className:"dashboard"},c.a.createElement("div",{className:"currentBalance"},c.a.createElement("h3",{id:"balanceTxt"},"Current balance: ",t||null),c.a.createElement("button",{id:"randomButton",onClick:function(){return b(!0)}},"Purchase something random"),c.a.createElement(p.a,{isOpen:f,ariaHideApp:!1,style:{content:{top:"50%",left:"50%",right:"auto",bottom:"auto",width:"24em",marginRight:"-50%",transform:"translate(-50%, -50%)"}}},c.a.createElement(h,{setBalance:a,transactions:i,setToggle:b,balance:t}))),c.a.createElement("h3",{style:{fontWeight:"bold"}},"Transactions"),c.a.createElement("div",{className:"transactionsBox"},c.a.createElement("div",{className:"passedTransactions"},i&&i?i.map((function(e){return c.a.createElement(d,{key:e.id,transaction:e})})):null)))},E=function(){var e=Object(n.useState)("dashboard"),t=Object(l.a)(e,2),a=t[0],r=t[1],o=Object(n.useState)({}),i=Object(l.a)(o,2),s=i[0],u=i[1],d=Object(n.useState)(0),f=Object(l.a)(d,2),p=f[0],h=f[1];Object(n.useEffect)((function(){console.log("useEffect get user"),function(){try{fetch("/api/account/100",{method:"get"}).then((function(e){return e.json()})).then((function(e){u(e)})).catch((function(e){return e}))}catch(e){console.log(e)}}()}),[]),Object(n.useEffect)((function(){console.log("useEffect get balance afterUser"),function(){try{fetch("/api/account/".concat(s.id,"/balance"),{method:"get"}).then((function(e){return e.json()})).then((function(e){h(e)})).catch((function(e){return e}))}catch(e){console.log(e)}}()}));var E=function(e){r(e)};return c.a.createElement("div",{className:"Root"},c.a.createElement("h3",null,"Welcome back"),c.a.createElement("header",{className:"App-header"},c.a.createElement("div",{className:"dashHeader",onClick:function(){return E("dashboard")}},c.a.createElement("p",null,"dashboard")),c.a.createElement("div",{className:"profHeader",onClick:function(){return E("profile")}},c.a.createElement("p",null,"profile"))),c.a.createElement("div",{className:"container"},"dashboard"===a?c.a.createElement(b,{balance:p,setBalance:h}):c.a.createElement(m,{user:s,setUser:u})))};a(56);var y=function(){return c.a.createElement(E,null)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var g=a(38),v=[{id:1e3,created:"2020-02-21T20:32:03.681Z",amount:2e3,type:"Debit",description:"Payroll Direct Deposit"},{id:999,created:"2020-02-21T20:14:09.703Z",amount:45.55,type:"Credit",description:"Main Street Gas Station"}],j={id:1e3,firstName:"Jane",lastName:"Smith",email:"jane.smith@example.com",phone:"5555555555",created:"2020-02-21T02:00:00.000Z",balance:"12345.67"};new g.a({routes:function(){this.namespace="/api",this.get("/account/:id",(function(){try{return j}catch(e){console.log("error: ",e)}})),this.get("/account/:id/transactions",(function(){try{return v}catch(e){console.log(e)}})),this.get("/account/:id/balance",(function(){try{return console.log(j.balance),j.balance}catch(e){console.log("error: ",e)}})),this.post("/account/:id/transactions",(function(e,t,a){try{var n=t.requestBody;return n=JSON.parse(n),v.push(n),v}catch(c){console.log("error: ",c)}})),this.put("/account/:id",(function(e,t,a){try{var n=t.requestBody;return n=JSON.parse(n)}catch(c){console.log("error: ",c)}}))}}),o.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(y,null)),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.42d1f971.chunk.js.map